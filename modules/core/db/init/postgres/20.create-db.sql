-- begin MAILING_MAILING
alter table MAILING_MAILING add constraint FK_MAILING_MAILING_ON_MAILING_TARGET_SCRIPT foreign key (MAILING_TARGET_SCRIPT_ID) references MAILING_GROOVY_SCRIPT(ID)^
alter table MAILING_MAILING add constraint FK_MAILING_MAILING_ON_ORIGIN_MAILING foreign key (ORIGIN_MAILING_ID) references MAILING_MAILING(ID)^
alter table MAILING_MAILING add constraint FK_MAILING_MAILING_ON_CONSOLIDATION_GROOVY foreign key (CONSOLIDATION_GROOVY_ID) references MAILING_GROOVY_SCRIPT(ID)^
alter table MAILING_MAILING add constraint FK_MAILING_MAILING_ON_NOTIFICATION_BUILD_SCRIPT foreign key (NOTIFICATION_BUILD_SCRIPT_ID) references MAILING_GROOVY_SCRIPT(ID)^
alter table MAILING_MAILING add constraint FK_MAILING_MAILING_ON_OBJECT_FILTER_SCRIPT foreign key (OBJECT_FILTER_SCRIPT_ID) references MAILING_GROOVY_SCRIPT(ID)^
alter table MAILING_MAILING add constraint FK_MAILING_MAILING_ON_FINAL_CHECK_SCRIPT foreign key (FINAL_CHECK_SCRIPT_ID) references MAILING_GROOVY_SCRIPT(ID)^
alter table MAILING_MAILING add constraint FK_MAILING_MAILING_ON_FINAL_DECORATION_SCRIPT foreign key (FINAL_DECORATION_SCRIPT_ID) references MAILING_GROOVY_SCRIPT(ID)^
create index IDX_MAILING_MAILING_ON_MAILING_TARGET_SCRIPT on MAILING_MAILING (MAILING_TARGET_SCRIPT_ID)^
create index IDX_MAILING_MAILING_ON_ORIGIN_MAILING on MAILING_MAILING (ORIGIN_MAILING_ID)^
create index IDX_MAILING_MAILING_ON_CONSOLIDATION_GROOVY on MAILING_MAILING (CONSOLIDATION_GROOVY_ID)^
create index IDX_MAILING_MAILING_ON_NOTIFICATION_BUILD_SCRIPT on MAILING_MAILING (NOTIFICATION_BUILD_SCRIPT_ID)^
create index IDX_MAILING_MAILING_ON_OBJECT_FILTER_SCRIPT on MAILING_MAILING (OBJECT_FILTER_SCRIPT_ID)^
create index IDX_MAILING_MAILING_ON_FINAL_CHECK_SCRIPT on MAILING_MAILING (FINAL_CHECK_SCRIPT_ID)^
create index IDX_MAILING_MAILING_ON_FINAL_DECORATION_SCRIPT on MAILING_MAILING (FINAL_DECORATION_SCRIPT_ID)^
-- end MAILING_MAILING
-- begin MAILING_NOTIFICATION
alter table MAILING_NOTIFICATION add constraint FK_MAILING_NOTIFICATION_ON_MAILING foreign key (MAILING_ID) references MAILING_MAILING(ID)^
create index IDX_MAILING_NOTIFICATION_ON_MAILING on MAILING_NOTIFICATION (MAILING_ID)^
-- end MAILING_NOTIFICATION
-- begin MAILING_NOTIFICATION_STAGE_LOG
alter table MAILING_NOTIFICATION_STAGE_LOG add constraint FK_MAILING_NOTIFICATION_STAGE_LOG_ON_NOTIFICATION foreign key (NOTIFICATION_ID) references MAILING_NOTIFICATION(ID)^
create index IDX_MAILING_NOTIFICATION_STAGE_LOG_ON_NOTIFICATION on MAILING_NOTIFICATION_STAGE_LOG (NOTIFICATION_ID)^
-- end MAILING_NOTIFICATION_STAGE_LOG
-- begin MAILING_MAILING_IDENTIFIER
create unique index IDX_MAILING_IDENTIFIER_UK_OBJECT_ID on MAILING_MAILING_IDENTIFIER (OBJECT_ID) where DELETE_TS is null ^
-- end MAILING_MAILING_IDENTIFIER
-- begin MAILING_WAY_TO_GET_MAILING_IDENTIFIER
alter table MAILING_WAY_TO_GET_MAILING_IDENTIFIER add constraint FK_MAILING_WAYTOGETIDENT_ON_MAILING_TO_REQUEST_IDENTIFER foreign key (MAILING_TO_REQUEST_IDENTIFER_ID) references MAILING_MAILING(ID)^
create unique index IDX_MAILING_WAY_TO_GET_MAILING_IDENTIFIER_UNQ on MAILING_WAY_TO_GET_MAILING_IDENTIFIER (ENTITY_ID, NOTIFICATION_CHANEL) where DELETE_TS is null ^
create index IDX_MAILING_WAYTOGETIDENT_ON_MAILING_TO_REQUEST_IDENTIFER on MAILING_WAY_TO_GET_MAILING_IDENTIFIER (MAILING_TO_REQUEST_IDENTIFER_ID)^
create index IDX_MAILING_WAY_TO_GET_MAILING_IDENTIFIER on MAILING_WAY_TO_GET_MAILING_IDENTIFIER (NOTIFICATION_CHANEL, MAILING_IDENTIFIER) ^
-- end MAILING_WAY_TO_GET_MAILING_IDENTIFIER
